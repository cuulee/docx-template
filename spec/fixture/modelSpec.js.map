{"version":3,"sources":["../src/modelSpec.js"],"names":[],"mappings":";;;;4BAAsB,qBAAqB;;;;6BACpB,sBAAsB;;;;6BACtB,sBAAsB;;;;uBACzB,WAAW;;;;uBACO,SAAS;;;;AAG/C,QAAQ,CAAC,QAAQ,EAAE,YAAI;AACnB,YAAQ,CAAC,gBAAgB,EAAE,YAAU;AACjC,iBAAS,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAC;AACnC,iCAAQ,IAAI,CAAC,0BAAQ,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI,EAAE;AACtC,oBAAI,CAAC,GAAC,EAAC,KAAK,EAAC,eAAA,CAAC;+BAAE,CAAC;qBAAA,EAAC;oBAAE,KAAK,GAAC,KAAK,CAAA;AAC/B,oBAAI,CAAC,KAAK,CAAC,qBAAQ,oBAAoB,CAAC,UAAS,SAAS,EAAC;AACvD,wBAAG,SAAS,CAAC,IAAI,IAAE,gBAAgB,EAC/B,OAAO,IAAI,CAAA;AACf,wBAAG,SAAS,CAAC,IAAI,IAAE,kBAAkB,EACjC,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EACrB,KAAK,GAAC,IAAI,CAAA;AAClB,2BAAO,CAAC,CAAA;iBACX,CAAC,CAAC,CAAA;AACH,oBAAG,CAAC,KAAK,EACL,IAAI,EAAE,CAAA;AACV,oBAAI,EAAE,CAAA;aACT,CAAC,SAAM,CAAC,UAAA,CAAC;uBAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAAA,CAAC,CAAA;SAC7B;;AAED,UAAE,CAAC,iCAAiC,EAAE,UAAS,IAAI,EAAC;AAChD,oBAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,6BAAW,IAAI,CAAC,CAAA;SAC1C,CAAC,CAAA;;AAEF,UAAE,CAAC,gDAAgD,EAAE,UAAS,IAAI,EAAC;AAC/D,oBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,8BAAY,IAAI,CAAC,CAAA;SAC5C,CAAC,CAAA;;AAEF,UAAE,CAAC,+BAA+B,EAAE,UAAS,IAAI,EAAC;AAC9C,oBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,8BAAY,IAAI,CAAC,CAAA;SAC5C,CAAC,CAAA;KACL,CAAC,CAAA;;AAEF,aAAS,CAAC,UAAU,EAAE,YAAI;AACtB,iBAAS,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAC;AACzC,gBAAI,EAAE,CAAA;SACT;AACD,UAAE,CAAC,MAAM,EAAE,UAAA,IAAI,EAAE;AACb,oBAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,6BAAY,EAAE,EAAC,IAAI,CAAC,CAAA;SAC9C,CAAC,CAAA;;AAEF,UAAE,CAAC,OAAO,EAAE,UAAA,IAAI,EAAE;AACd,oBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,8BAAa,EAAE,EAAC,IAAI,CAAC,CAAA;SAChD,CAAC,CAAA;;AAEF,UAAE,CAAC,KAAK,EAAE,UAAA,IAAI,EAAE;AACZ,oBAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,8BAAY,EAAE,EAAC,IAAI,CAAC,CAAA;SAC/C,CAAC,CAAA;KACL,CAAC,CAAA;;AAEF,QAAI,QAAQ,GAAC;AACT,YAAI,qpBAkBS;AACb,aAAK,2qBAkBQ;AACb,aAAK,ybAYsB,SAAS,8HAIvB;KAChB,CAAA;CAEJ,CAAC,CAAA","file":"modelSpec.js","sourcesContent":["import ControlIf from \"../../lib/controlIf\"\r\nimport ControlFor from \"../../lib/controlFor\"\r\nimport ControlVar from \"../../lib/controlVar\"\r\nimport newDocx from \"./newDocx\"\r\nimport docx4js, {Visitor as Any} from \"docx4js\"\r\n\r\n\r\ndescribe(\"models\", ()=>{\r\n    describe(\"identification\", function(){\r\n        function identify(content, Model, done){\r\n            docx4js.load(newDocx(content)).then(docx=>{\r\n                let a={visit:a=>1}, found=false\r\n                docx.parse(docx4js.createVisitorFactory(function(wordModel){\r\n                    if(wordModel.type=='documentStyles')\r\n                        return null\r\n                    if(wordModel.type=='control.richtext')\r\n                        if (Model.test(wordModel))\r\n                            found=true\r\n                    return a\r\n                }))\r\n                if(!found)\r\n                    fail()\r\n                done()\r\n            }).catch(e=>done(fail(e)))\r\n        }\r\n\r\n        it(\"can identify if control: if(.*)\", function(done){\r\n            identify(contents['if'],ControlIf,done)\r\n        })\r\n\r\n        it(\"can identify for control:for(var i=10;i>0;i--)\", function(done){\r\n            identify(contents['for'],ControlFor,done)\r\n        })\r\n\r\n        it(\"can identify variable control\", function(done){\r\n            identify(contents['var'],ControlVar,done)\r\n        })\r\n    })\r\n\r\n    xdescribe(\"assembly\", ()=>{\r\n        function assemble(content, Model, data, done){\r\n            done()\r\n        }\r\n        it(\"if()\", done=>{\r\n            assemble(contents['if'], ControlIf,{},done)\r\n        })\r\n\r\n        it(\"for()\", done=>{\r\n            assemble(contents['for'],ControlFor, {},done)\r\n        })\r\n\r\n        it(\"${}\", done=>{\r\n            assemble(contents['for'],ControlVar,{},done)\r\n        })\r\n    })\r\n\r\n    let contents={\r\n        \"if\":`\r\n            <w:sdt>\r\n                <w:sdtPr>\r\n                    <w:alias w:val=\"a==1\"/>\r\n                    <w:tag w:val=\"if(a==1)\"/>\r\n                    <w:id w:val=\"922459404\"/>\r\n                    <w:placeholder>\r\n                        <w:docPart w:val=\"DefaultPlaceholder_1082065158\"/>\r\n                    </w:placeholder>\r\n                </w:sdtPr>\r\n                <w:sdtEndPr/>\r\n                <w:sdtContent>\r\n                    <w:p>\r\n                        <w:r>\r\n                            <w:t>hello.</w:t>\r\n                        </w:r>\r\n                    </w:p>\r\n                </w:sdtContent>\r\n            </w:sdt>`,\r\n        \"for\":`\r\n            <w:sdt>\r\n                <w:sdtPr>\r\n                    <w:alias w:val=\"loop 10 times\"/>\r\n                    <w:tag w:val=\"for(var i=10;i>0;i--)\"/>\r\n                    <w:id w:val=\"922459404\"/>\r\n                    <w:placeholder>\r\n                        <w:docPart w:val=\"DefaultPlaceholder_1082065158\"/>\r\n                    </w:placeholder>\r\n                </w:sdtPr>\r\n                <w:sdtEndPr/>\r\n                <w:sdtContent>\r\n                    <w:p>\r\n                        <w:r>\r\n                            <w:t>hello.</w:t>\r\n                        </w:r>\r\n                    </w:p>\r\n                </w:sdtContent>\r\n            </w:sdt>`,\r\n        \"var\":`\r\n            <w:sdt>\r\n                <w:sdtPr>\r\n                    <w:id w:val=\"922459404\"/>\r\n                    <w:placeholder>\r\n                        <w:docPart w:val=\"DefaultPlaceholder_1082065158\"/>\r\n                    </w:placeholder>\r\n                </w:sdtPr>\r\n                <w:sdtEndPr/>\r\n                <w:sdtContent>\r\n                    <w:p>\r\n                        <w:r>\r\n                            <w:t>${\"${name}\"}</w:t>\r\n                        </w:r>\r\n                    </w:p>\r\n                </w:sdtContent>\r\n            </w:sdt>`\r\n    }\r\n\r\n})\r\n"]}